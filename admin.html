<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Panel - Jack's Lab</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,300;0,400;0,500;1,400&family=Fraunces:ital,opsz,wght@0,9..144,300;0,9..144,600;1,9..144,300&display=swap" rel="stylesheet" />
  <style>
    .admin-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 120px 48px 80px;
    }

    .admin-tabs {
      display: flex;
      gap: 16px;
      margin-bottom: 48px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 16px;
    }

    .admin-tab {
      padding: 12px 24px;
      background: transparent;
      border: none;
      color: var(--text-dim);
      font-family: var(--mono);
      font-size: 12px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.2s;
      border-bottom: 2px solid transparent;
    }

    .admin-tab.active {
      color: var(--amber);
      border-bottom-color: var(--amber);
    }

    .admin-tab:hover {
      color: var(--amber);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .form-group {
      margin-bottom: 24px;
    }

    .form-label {
      display: block;
      font-size: 11px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--text-dim);
      margin-bottom: 8px;
    }

    .form-input,
    .form-textarea,
    .form-select {
      width: 100%;
      padding: 12px 16px;
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 2px;
      color: var(--text);
      font-family: var(--mono);
      font-size: 13px;
      transition: border 0.2s;
    }

    .form-input:focus,
    .form-textarea:focus,
    .form-select:focus {
      outline: none;
      border-color: var(--amber);
    }

    .form-textarea {
      min-height: 200px;
      resize: vertical;
      line-height: 1.6;
    }

    .form-textarea.content {
      min-height: 400px;
      font-size: 14px;
    }

    .tag-input-container {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      padding: 8px;
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 2px;
      min-height: 48px;
    }

    .tag-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      background: var(--amber-dim);
      color: var(--text);
      border-radius: 2px;
      font-size: 11px;
      letter-spacing: 0.05em;
    }

    .tag-remove {
      cursor: pointer;
      color: var(--text-dim);
      font-weight: bold;
    }

    .tag-remove:hover {
      color: var(--amber);
    }

    .add-tag-input {
      flex: 1;
      min-width: 120px;
      background: transparent;
      border: none;
      color: var(--text);
      font-family: var(--mono);
      font-size: 13px;
      outline: none;
    }

    .form-actions {
      display: flex;
      gap: 16px;
      margin-top: 32px;
    }

    .output-section {
      margin-top: 48px;
      padding: 24px;
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 2px;
      display: none;
    }

    .output-section.show {
      display: block;
    }

    .output-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .output-title {
      font-size: 13px;
      color: var(--amber);
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }

    .copy-btn {
      padding: 8px 16px;
      background: transparent;
      border: 1px solid var(--border);
      border-radius: 2px;
      color: var(--text-dim);
      font-family: var(--mono);
      font-size: 11px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.2s;
    }

    .copy-btn:hover {
      border-color: var(--amber);
      color: var(--amber);
    }

    .output-code {
      background: var(--bg);
      padding: 16px;
      border-radius: 2px;
      overflow-x: auto;
      font-size: 12px;
      line-height: 1.6;
      color: var(--text);
      white-space: pre-wrap;
      word-break: break-word;
    }

    .preview-section {
      margin-top: 32px;
      padding: 24px;
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 2px;
    }

    .preview-title {
      font-size: 13px;
      color: var(--amber);
      letter-spacing: 0.1em;
      text-transform: uppercase;
      margin-bottom: 16px;
    }

    .two-col {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }

    @media (max-width: 768px) {
      .two-col {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

  <!-- â”€â”€ Nav â”€â”€ -->
  <nav>
    <a href="index.html" class="nav-logo">jack's lab</a>
    <ul class="nav-links">
      <li><a href="projects.html">Projects</a></li>
      <li><a href="bloghome.html">Blog</a></li>
      <li><a href="index.html#about">About</a></li>
      <li><a href="index.html#contact">Contact</a></li>
    </ul>
  </nav>

  <!-- â”€â”€ Admin Panel â”€â”€ -->
  <div class="admin-container">
    <h1 style="font-family: var(--serif); font-size: clamp(48px, 7vw, 72px); font-weight: 300; color: #ede8df; margin-bottom: 16px; line-height: 1.1;">
      Admin <em style="color: var(--amber); font-style: italic;">Panel</em>
    </h1>
    <p style="font-size: 14px; color: var(--text-dim); margin-bottom: 24px;">
      Create and manage your content with ease.
    </p>

    <!-- Download Section -->
    <div style="background: var(--bg2); border: 1px solid var(--border); border-radius: 2px; padding: 24px; margin-bottom: 48px;">
      <div style="font-size: 13px; color: var(--amber); letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 16px;">Export Your Content</div>
      <div style="display: flex; gap: 16px; flex-wrap: wrap; align-items: center;">
        <button onclick="downloadPosts()" class="btn btn-primary">
          ðŸ“¥ Download posts.json (<span id="postCount">0</span> posts)
        </button>
        <button onclick="downloadProjects()" class="btn btn-primary">
          ðŸ“¥ Download projects.json (<span id="projectCount">0</span> projects)
        </button>
      </div>
      <p style="font-size: 12px; color: var(--text-faint); margin-top: 16px; line-height: 1.6;">
        After creating content below, download these files and upload them to your GitHub repo. Your site will automatically display all your posts and projects!
      </p>
    </div>

    <!-- Tabs -->
    <div class="admin-tabs">
      <button class="admin-tab active" data-tab="blog">New Blog Post</button>
      <button class="admin-tab" data-tab="project">New Project</button>
    </div>

    <!-- Blog Post Form -->
    <div id="blogTab" class="tab-content active">
      <form id="blogForm">
        <div class="two-col">
          <div class="form-group">
            <label class="form-label">Post Title</label>
            <input type="text" class="form-input" id="blogTitle" placeholder="My Awesome Blog Post" required />
          </div>

          <div class="form-group">
            <label class="form-label">Date (YYYY-MM)</label>
            <input type="text" class="form-input" id="blogDate" placeholder="2026-02" required />
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Post Number</label>
          <input type="text" class="form-input" id="blogNumber" placeholder="06" required />
        </div>

        <div class="form-group">
          <label class="form-label">Tags</label>
          <div class="tag-input-container" id="blogTagContainer">
            <input type="text" class="add-tag-input" id="blogTagInput" placeholder="Press Enter to add tags..." />
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Content (Markdown supported)</label>
          <textarea class="form-textarea content" id="blogContent" placeholder="Write your blog post here...

# Heading
## Subheading
- Bullet point
- Another point

**Bold text** and *italic text*

Code blocks:
```
your code here
```" required></textarea>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn btn-primary">Save Blog Post</button>
          <button type="button" class="btn btn-ghost" onclick="document.getElementById('blogForm').reset(); blogTags = []; renderBlogTags();">Clear Form</button>
        </div>
      </form>

      <!-- Output -->
      <div id="blogOutput" class="output-section">
        <div class="output-header">
          <span class="output-title">Generated HTML</span>
          <button class="copy-btn" onclick="copyBlogCode()">Copy Code</button>
        </div>
        <pre class="output-code" id="blogCode"></pre>
      </div>

      <!-- Instructions -->
      <div class="preview-section">
        <div class="preview-title">How it works</div>
        <ol style="font-size: 13px; color: var(--text-dim); line-height: 1.8; padding-left: 20px;">
          <li>Fill in the form above and click "Save Blog Post"</li>
          <li>Your post is saved in your browser</li>
          <li>Click "Download posts.json" at the top</li>
          <li>Upload <code style="background: var(--bg); padding: 2px 6px; border-radius: 2px; color: var(--amber);">posts.json</code> to your GitHub repo</li>
          <li>Your blog automatically displays all posts! âœ¨</li>
        </ol>
      </div>
    </div>

    <!-- Project Form -->
    <div id="projectTab" class="tab-content">
      <form id="projectForm">
        <div class="two-col">
          <div class="form-group">
            <label class="form-label">Project Number</label>
            <input type="text" class="form-input" id="projectNumber" placeholder="005" required />
          </div>

          <div class="form-group">
            <label class="form-label">Project Title</label>
            <input type="text" class="form-input" id="projectTitle" placeholder="My Cool Project" required />
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Project Link (optional)</label>
          <input type="text" class="form-input" id="projectLink" placeholder="project-page.html or #" />
        </div>

        <div class="form-group">
          <label class="form-label">Description</label>
          <textarea class="form-textarea" id="projectDesc" placeholder="A brief description of what this project is about and what you learned..." required></textarea>
        </div>

        <div class="form-group">
          <label class="form-label">Tags</label>
          <div class="tag-input-container" id="projectTagContainer">
            <input type="text" class="add-tag-input" id="projectTagInput" placeholder="Press Enter to add tags..." />
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn btn-primary">Save Project</button>
          <button type="button" class="btn btn-ghost" onclick="document.getElementById('projectForm').reset(); projectTags = []; renderProjectTags();">Clear Form</button>
        </div>
      </form>

      <!-- Output -->
      <div id="projectOutput" class="output-section">
        <div class="output-header">
          <span class="output-title">Generated HTML</span>
          <button class="copy-btn" onclick="copyProjectCode()">Copy Code</button>
        </div>
        <pre class="output-code" id="projectCode"></pre>
      </div>

      <!-- Instructions -->
      <div class="preview-section">
        <div class="preview-title">How it works</div>
        <ol style="font-size: 13px; color: var(--text-dim); line-height: 1.8; padding-left: 20px;">
          <li>Fill in the form above and click "Save Project"</li>
          <li>Your project is saved in your browser</li>
          <li>Click "Download projects.json" at the top</li>
          <li>Upload <code style="background: var(--bg); padding: 2px 6px; border-radius: 2px; color: var(--amber);">projects.json</code> to your GitHub repo</li>
          <li>Your projects page automatically updates! âœ¨</li>
        </ol>
      </div>
    </div>
  </div>

  <!-- â”€â”€ Footer â”€â”€ -->
  <footer>
    <span>Â© 2026 Jack's Lab</span>
    <span>Built with intention.</span>
  </footer>

  <!-- â”€â”€ JavaScript â”€â”€ -->
  <script>
    // Tab switching
    const tabs = document.querySelectorAll('.admin-tab');
    const tabContents = document.querySelectorAll('.tab-content');

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const targetTab = tab.getAttribute('data-tab');
        
        tabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        
        tabContents.forEach(content => {
          content.classList.remove('active');
        });
        
        document.getElementById(targetTab + 'Tab').classList.add('active');
      });
    });

    // Load existing data from localStorage
    let allPosts = JSON.parse(localStorage.getItem('jackslabPosts')) || [];
    let allProjects = JSON.parse(localStorage.getItem('jackslabProjects')) || [];

    // Blog Tags Management
    let blogTags = [];
    const blogTagInput = document.getElementById('blogTagInput');
    const blogTagContainer = document.getElementById('blogTagContainer');

    blogTagInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        const tag = blogTagInput.value.trim();
        if (tag && !blogTags.includes(tag)) {
          blogTags.push(tag);
          blogTagInput.value = '';
          renderBlogTags();
        }
      }
    });

    function renderBlogTags() {
      const pills = blogTags.map(tag => 
        `<span class="tag-pill">${tag}<span class="tag-remove" onclick="removeBlogTag('${tag}')">Ã—</span></span>`
      ).join('');
      
      blogTagContainer.innerHTML = pills + '<input type="text" class="add-tag-input" id="blogTagInput" placeholder="Press Enter to add tags..." />';
      
      const newInput = document.getElementById('blogTagInput');
      newInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          const tag = newInput.value.trim();
          if (tag && !blogTags.includes(tag)) {
            blogTags.push(tag);
            newInput.value = '';
            renderBlogTags();
          }
        }
      });
    }

    function removeBlogTag(tag) {
      blogTags = blogTags.filter(t => t !== tag);
      renderBlogTags();
    }

    // Project Tags Management
    let projectTags = [];
    const projectTagInput = document.getElementById('projectTagInput');
    const projectTagContainer = document.getElementById('projectTagContainer');

    projectTagInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        const tag = projectTagInput.value.trim();
        if (tag && !projectTags.includes(tag)) {
          projectTags.push(tag);
          projectTagInput.value = '';
          renderProjectTags();
        }
      }
    });

    function renderProjectTags() {
      const pills = projectTags.map(tag => 
        `<span class="tag-pill">${tag}<span class="tag-remove" onclick="removeProjectTag('${tag}')">Ã—</span></span>`
      ).join('');
      
      projectTagContainer.innerHTML = pills + '<input type="text" class="add-tag-input" id="projectTagInput" placeholder="Press Enter to add tags..." />';
      
      const newInput = document.getElementById('projectTagInput');
      newInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          const tag = newInput.value.trim();
          if (tag && !projectTags.includes(tag)) {
            projectTags.push(tag);
            newInput.value = '';
            renderProjectTags();
          }
        }
      });
    }

    function removeProjectTag(tag) {
      projectTags = projectTags.filter(t => t !== tag);
      renderProjectTags();
    }

    // Blog Form Submission
    document.getElementById('blogForm').addEventListener('submit', (e) => {
      e.preventDefault();
      
      const title = document.getElementById('blogTitle').value;
      const date = document.getElementById('blogDate').value;
      const number = document.getElementById('blogNumber').value;
      const content = document.getElementById('blogContent').value;
      
      const dateObj = new Date(date + '-01');
      const displayDate = dateObj.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });
      
      // Convert markdown-style content to HTML
      let htmlContent = content
        .replace(/^# (.+)$/gm, '<h1 style="font-family: var(--serif); font-size: 48px; font-weight: 300; color: #ede8df; margin: 32px 0 16px;">$1</h1>')
        .replace(/^## (.+)$/gm, '<h2 style="font-family: var(--serif); font-size: 32px; font-weight: 300; color: #ede8df; margin: 24px 0 12px;">$1</h2>')
        .replace(/^### (.+)$/gm, '<h3 style="font-family: var(--mono); font-size: 18px; color: var(--amber); margin: 20px 0 8px; letter-spacing: 0.05em;">$1</h3>')
        .replace(/\*\*(.+?)\*\*/g, '<strong style="color: var(--amber);">$1</strong>')
        .replace(/\*(.+?)\*/g, '<em style="color: var(--text);">$1</em>')
        .replace(/^- (.+)$/gm, '<li style="margin: 8px 0;">$1</li>')
        .replace(/```([\s\S]*?)```/g, '<pre style="background: var(--bg); padding: 16px; border-radius: 2px; overflow-x: auto; margin: 16px 0; border: 1px solid var(--border);"><code style="font-family: var(--mono); font-size: 13px; color: var(--text);">$1</code></pre>')
        .replace(/`(.+?)`/g, '<code style="background: var(--bg2); padding: 2px 6px; border-radius: 2px; color: var(--amber); font-family: var(--mono); font-size: 12px;">$1</code>')
        .split('\n\n')
        .map(para => {
          if (para.startsWith('<h') || para.startsWith('<pre') || para.startsWith('<li')) {
            return para;
          }
          if (para.includes('<li')) {
            return para;
          }
          return '<p style="margin: 16px 0; line-height: 1.8;">' + para + '</p>';
        })
        .join('\n');
      
      htmlContent = htmlContent.replace(/(<li.*?<\/li>\s*)+/g, '<ul style="padding-left: 24px; margin: 16px 0;">$&</ul>');
      
      const filename = 'blog-post-' + number + '.html';
      
      const post = {
        number: number,
        title: title,
        date: date,
        displayDate: displayDate,
        tags: blogTags,
        content: content,
        htmlContent: htmlContent,
        filename: filename
      };
      
      // Add to posts array
      allPosts.push(post);
      
      // Save to localStorage
      localStorage.setItem('jackslabPosts', JSON.stringify(allPosts));
      
      alert(`âœ… Blog post saved! You now have ${allPosts.length} post(s).
      
Next steps:
1. Click "Download posts.json" below
2. Upload it to your GitHub repo
3. Your blog will automatically update!`);
      
      // Reset form
      document.getElementById('blogForm').reset();
      blogTags = [];
      renderBlogTags();
      
      updateDownloadButtons();
    });

    // Project Form Submission
    document.getElementById('projectForm').addEventListener('submit', (e) => {
      e.preventDefault();
      
      const number = document.getElementById('projectNumber').value;
      const title = document.getElementById('projectTitle').value;
      const link = document.getElementById('projectLink').value || '#';
      const desc = document.getElementById('projectDesc').value;
      
      const project = {
        number: number,
        title: title,
        link: link,
        description: desc,
        tags: projectTags
      };
      
      // Add to projects array
      allProjects.push(project);
      
      // Save to localStorage
      localStorage.setItem('jackslabProjects', JSON.stringify(allProjects));
      
      alert(`âœ… Project saved! You now have ${allProjects.length} project(s).

Next steps:
1. Click "Download projects.json" below
2. Upload it to your GitHub repo
3. Your projects page will automatically update!`);
      
      // Reset form
      document.getElementById('projectForm').reset();
      projectTags = [];
      renderProjectTags();
      
      updateDownloadButtons();
    });

    // Download JSON functions
    function downloadPosts() {
      const dataStr = JSON.stringify(allPosts, null, 2);
      const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
      const exportFileDefaultName = 'posts.json';
      
      const linkElement = document.createElement('a');
      linkElement.setAttribute('href', dataUri);
      linkElement.setAttribute('download', exportFileDefaultName);
      linkElement.click();
    }

    function downloadProjects() {
      const dataStr = JSON.stringify(allProjects, null, 2);
      const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
      const exportFileDefaultName = 'projects.json';
      
      const linkElement = document.createElement('a');
      linkElement.setAttribute('href', dataUri);
      linkElement.setAttribute('download', exportFileDefaultName);
      linkElement.click();
    }

    function updateDownloadButtons() {
      document.getElementById('postCount').textContent = allPosts.length;
      document.getElementById('projectCount').textContent = allProjects.length;
    }

    // Initialize download button counts
    updateDownloadButtons();
  </script>

</body>
</html>
